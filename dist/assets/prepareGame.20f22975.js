import{d as e,aP as t,c as a,r as l,o as i,b as o,w as s,e as n,az as r,aJ as d,aQ as u,aI as f,aR as p,g as m,aA as g,aM as h,aN as c,aF as b,aB as _,ay as y,aS as k,aT as M}from"./vendor.3f82f248.js";import{u as v}from"./store.95bf63e0.js";import{_ as w}from"./TacticalSelector.vue_vue&type=script&setup=true&lang.290bedcc.js";const D=["onDragstart","onDrop"],C={key:0},S={style:{height:"50px",width:"50px"}},x=b("bar"),T=b("bar"),N=b("bar"),$=b("bar"),B=["onDrop"],R={style:{height:"50px",width:"50px"}},L={style:{display:"flex",height:"120px",width:"120px",margin:"0 30px 30px 0"}},j=b("bar"),A=b("bar"),W=b("bar"),G=b("bar"),I=b("bar"),K=b("跳过比赛"),z=b("开始比赛");var F=e({setup(e){const F=v(),J=t({ST:{name:["ST1","ST2"],isMasked:!1,activeNum:0,maxNum:2,fieldStyle:{position:"absolute",left:"30%",top:"5%",height:"15%",width:"40%"},maskStyle:{position:"absolute",left:"30%",top:"5%",height:"15%",width:"40%"}},LW:{name:["LW"],isMasked:!1,activeNum:0,maxNum:1,fieldStyle:{position:"absolute",left:"0",top:"8%",height:"15%",width:"29%"},maskStyle:{position:"absolute",left:"0",top:"8%",height:"15%",width:"29%"}},RW:{name:["RW"],isMasked:!1,activeNum:0,maxNum:1,fieldStyle:{position:"absolute",left:"71%",top:"8%",height:"15%",width:"30%"},maskStyle:{position:"absolute",left:"71%",top:"8%",height:"15%",width:"30%"}},CAM:{name:["CAM1","CAM2"],isMasked:!1,activeNum:0,maxNum:2,fieldStyle:{position:"absolute",left:"30%",top:"21%",height:"14%",width:"40%"},maskStyle:{position:"absolute",left:"30%",top:"21%",height:"14%",width:"40%"}},LM:{name:["LM"],isMasked:!1,activeNum:0,maxNum:1,fieldStyle:{position:"absolute",left:"0",top:"33%",height:"14%",width:"24%"},maskStyle:{position:"absolute",left:"0",top:"33%",height:"14%",width:"24%"}},RM:{name:["RM"],isMasked:!1,activeNum:0,maxNum:1,fieldStyle:{position:"absolute",left:"76%",top:"33%",height:"14%",width:"24%"},maskStyle:{position:"absolute",left:"76%",top:"33%",height:"14%",width:"24%"}},CM:{name:["CM1","CM2","CM3"],isMasked:!1,activeNum:0,maxNum:3,fieldStyle:{position:"absolute",left:"25%",top:"36%",height:"14%",width:"50%"},maskStyle:{position:"absolute",left:"25%",top:"36%",height:"14%",width:"50%"}},CDM:{name:["CDM1","CDM2"],isMasked:!1,activeNum:0,maxNum:2,fieldStyle:{position:"absolute",left:"30%",top:"51%",height:"14%",width:"40%"},maskStyle:{position:"absolute",left:"30%",top:"51%",height:"14%",width:"40%"}},LB:{name:["LB"],isMasked:!1,activeNum:0,maxNum:1,fieldStyle:{position:"absolute",left:"0",top:"63%",height:"14%",width:"24%"},maskStyle:{position:"absolute",left:"0",top:"63%",height:"14%",width:"24%"}},RB:{name:["RB"],isMasked:!1,activeNum:0,maxNum:1,fieldStyle:{position:"absolute",left:"76%",top:"63%",height:"14%",width:"24%"},maskStyle:{position:"absolute",left:"76%",top:"63%",height:"14%",width:"24%"}},CB:{name:["CB1","CB2","CB3"],isMasked:!1,activeNum:0,maxNum:3,fieldStyle:{position:"absolute",left:"25%",top:"66%",height:"14%",width:"50%"},maskStyle:{position:"absolute",left:"25%",top:"66%",height:"14%",width:"50%"}},GK:{name:["GK"],isMasked:!1,activeNum:0,maxNum:1,fieldStyle:{position:"absolute",left:"30%",top:"81%",height:"14%",width:"40%"},maskStyle:{position:"absolute",left:"30%",top:"81%",height:"14%",width:"40%"}}}),P=t({LW:null,ST1:null,ST2:null,RW:null,CAM1:null,CAM2:null,LM:null,CM1:null,CM2:null,CM3:null,RM:null,CDM1:null,CDM2:null,LB:null,CB1:null,CB2:null,CB3:null,RB:null,GK:null}),Q=a((()=>{let e=0;for(let t in P)null!=P[t]&&e++;return e})),q=e=>{for(let t in P)if(P[t]==e)return!0;return!1},E=e=>{for(let t in J)for(let e of J[t].name)if(null==P[e]){J[t].isMasked=!0,console.log(`${t} 的遮罩层已打开`);break}if(e)for(let t in J)for(let a of J[t].name)if(a==e&&1==J[t].isMasked){J[t].isMasked=!1,console.log(`${t} 由于是拖曳源，因此关闭遮罩层`);break}},H=e=>{(()=>{for(let e in J)J[e].isMasked=!1})(),e.dataTransfer&&e.dataTransfer.clearData()},O=e=>{for(let t of F.playerData)if(t.id==e)return t;return null},U=e=>{if(null==e)return{};let t=O(e);return null==t?{}:t.avatar};function V(){window.$router.push({name:"endGame"})}function X(){window.$router.push({name:"onGame"})}return(e,t)=>{const a=l("n-h4"),v=l("n-space"),Y=l("n-progress"),Z=l("n-descriptions-item"),ee=l("n-descriptions"),te=l("n-card"),ae=l("n-popover"),le=l("n-gi"),ie=l("n-h2"),oe=l("n-grid"),se=l("n-scrollbar"),ne=l("n-button");return i(),o(oe,{cols:"3","x-gap":"10"},{default:s((()=>[n(le,null,{default:s((()=>[n(te,{class:"field"},{default:s((()=>[(i(!0),r(f,null,d(m(J),((e,l)=>(i(),r("div",{style:u(e.fieldStyle)},[n(v,{justify:"center"},{default:s((()=>{return[(i(!0),r(f,null,d((e=l,J[e].name.filter((e=>null!=P[e]))),(e=>(i(),r("div",{draggable:!0,onDragend:H,onDragstart:t=>((e,t)=>{E(t),e.dataTransfer&&(e.dataTransfer.setData("dragId",P[t]),e.dataTransfer.setData("dragCompo","position"),e.dataTransfer.setData("pos",t))})(t,e),onDrop:t=>((e,t)=>{if(e.dataTransfer){let a=e.dataTransfer.getData("dragCompo"),l=e.dataTransfer.getData("dragId");if("selection"==a){if(Q.value>=11)return;console.log("选项位到阵容槽");for(let e in P)P[e]==l&&(P[e]=null);console.log(`${l} 移动到 ${t} 位置`),P[t]=l,console.log(P)}else if("position"==a){console.log("阵容槽到阵容槽");let a=e.dataTransfer.getData("pos");a==t?console.log("没移动"):null==P[t]?(console.log(`${l} 从 ${a} 移到 ${t}`),P[a]=null,P[t]=l):(console.log(`${l} 与 ${P[t]} 交换位置 ; ${a} 换到 ${t}`),P[a]=P[t],P[t]=l)}}})(t,e),onDragover:t[0]||(t[0]=p((()=>{}),["prevent"]))},[m(P)[e]?(i(),r("div",C,[n(ae,{raw:"",trigger:"click"},{trigger:s((()=>[n(v,{vertical:"",align:"center"},{default:s((()=>[g("div",S,[n(h,c({isCircle:!1},U(m(P)[e])),null,16)]),n(a,null,{default:s((()=>[b(_(O(m(P)[e]).translated_name),1)])),_:2},1024)])),_:2},1024)])),default:s((()=>[n(te,{title:O(m(P)[e]).translated_name},{"header-extra":s((()=>[n(Y,{"circle-gap":5,percentage:[20,50],"stroke-width":10,status:"success",style:{width:"40px",margin:"0 10px 0 40px"},type:"multiple-circle"})])),default:s((()=>[n(ee,{column:3,"label-placement":"top"},{default:s((()=>[n(Z,{label:"能力"},{default:s((()=>[b(_(O(m(P)[e]).location_capa[l]),1)])),_:2},1024),n(Z,{label:"位置"},{default:s((()=>[b(_(l),1)])),_:2},1024),n(Z,{label:"占位"},{default:s((()=>[x])),_:1}),n(Z,{label:"占位"},{default:s((()=>[T])),_:1}),n(Z,{label:"占位"},{default:s((()=>[N])),_:1}),n(Z,{label:"占位"},{default:s((()=>[$])),_:1})])),_:2},1024)])),_:2},1032,["title"])])),_:2},1024)])):y("",!0)],40,D)))),256))];var e})),_:2},1024)],4)))),256)),(i(!0),r(f,null,d(m(J),((e,l)=>k((i(),r("div",{style:u(e.maskStyle),class:"mask",onDrop:e=>((e,t)=>{if(e.dataTransfer){let a=e.dataTransfer.getData("dragCompo"),l=e.dataTransfer.getData("dragId"),i=e.dataTransfer.getData("pos");if("selection"==a){if(Q.value>=11)return;let e="";for(let t in P)if(P[t]==l){e=t;break}for(let a=0;a<J[t].name.length;a++){let i=J[t].name[a];if(!P[i]){P[i]=l,console.log(`球员 ${l} 经过位置块拖曳到位置 ${i}`),e&&(P[e]=null);break}}}else if("position"==a){let e=!1;for(let a=0;a<J[t].name.length;a++){let o=J[t].name[a];if(!P[o]){P[o]=l,console.log(`球员 ${l} 从 ${i} 转移到位置 ${o}`),e=!0;break}}e&&(P[i]=null)}}})(e,l),onDragover:t[1]||(t[1]=p((()=>{}),["prevent"]))},[n(a,null,{default:s((()=>[b(_(l),1)])),_:2},1024)],44,B)),[[M,e.isMasked]]))),256))])),_:1})])),_:1}),n(le,null,{default:s((()=>[n(te,null,{default:s((()=>[n(se,{style:{"max-height":"800px"},"x-scrollable":""},{default:s((()=>[n(v,{justify:"space-around"},{default:s((()=>[(i(!0),r(f,null,d(m(F).playerData,(e=>(i(),o(ae,{raw:"",trigger:"click"},{trigger:s((()=>[n(te,{bordered:!1,draggable:!0,embedded:q(e.id),size:"small",onDragend:H,onDragstart:t=>((e,t)=>{E(null),e.dataTransfer&&e.target&&(e.dataTransfer.setData("dragId",t.id),e.dataTransfer.setData("dragCompo","selection"))})(t,e),onDrop:t=>((e,t)=>{if(e.dataTransfer){let a=e.dataTransfer.getData("dragCompo");if("selection"==a)console.log("禁止从选项栏移到选项栏");else if("position"==a){for(let e in P)if(P[e]==t.id){P[e]=null;break}console.log("阵容槽到选项栏");let a=e.dataTransfer.getData("pos");console.log(`${a} 上的 ${P[a]} 被替换为 ${t.id}`),P[a]=t.id}}})(t,e),onDragover:t[2]||(t[2]=p((()=>{}),["prevent"]))},{default:s((()=>[n(v,{vertical:"",align:"center"},{default:s((()=>[g("div",R,[n(h,c({isCircle:!1},e.avatar),null,16)]),n(a,null,{default:s((()=>[b(_(e.translated_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["embedded","onDragstart","onDrop"])])),default:s((()=>[n(te,null,{header:s((()=>[n(ie,null,{default:s((()=>[b(_(e.translated_name),1)])),_:2},1024)])),"header-extra":s((()=>[n(Y,{"circle-gap":5,percentage:[20,50],"stroke-width":10,status:"success",style:{width:"40px"},type:"multiple-circle"})])),default:s((()=>[n(oe,{cols:"3"},{default:s((()=>[n(le,{span:"1"},{default:s((()=>[g("div",L,[n(h,c({isCircle:!1},e.avatar),null,16)])])),_:2},1024),n(le,{span:"2"},{default:s((()=>[n(ee,{column:3,"label-placement":"top"},{default:s((()=>[n(Z,{label:"能力"},{default:s((()=>[b(_(e.top_capa),1)])),_:2},1024),n(Z,{label:"占位"},{default:s((()=>[j])),_:1}),n(Z,{label:"占位"},{default:s((()=>[A])),_:1}),n(Z,{label:"占位"},{default:s((()=>[W])),_:1}),n(Z,{label:"占位"},{default:s((()=>[G])),_:1}),n(Z,{label:"占位"},{default:s((()=>[I])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1})])),_:1}),n(le,null,{default:s((()=>[n(oe,{cols:"1","y-gap":"10"},{default:s((()=>[n(le,null,{default:s((()=>[n(w)])),_:1}),n(le,null,{default:s((()=>[n(v,{align:"center",justify:"end"},{default:s((()=>[n(ne,{onClick:V},{default:s((()=>[K])),_:1}),n(ne,{color:"#037dff",onClick:X},{default:s((()=>[z])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}});export{F as default};
